[{"id":"12ace80a.e50df8","type":"tab","label":"Alpaca - Order Spread","disabled":false,"info":""},{"id":"c34590c4.0d795","type":"inject","z":"12ace80a.e50df8","name":"","topic":"","payload":"{}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":100,"wires":[["ce5ee835.c18378"]]},{"id":"17dce38d.540a1c","type":"debug","z":"12ace80a.e50df8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":650,"y":260,"wires":[]},{"id":"ce5ee835.c18378","type":"change","z":"12ace80a.e50df8","name":"TWTR","rules":[{"t":"set","p":"stock","pt":"msg","to":"TWTR","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":180,"wires":[["2e5004.47f77ffc"]]},{"id":"cfd4aa2c.ddc618","type":"function","z":"12ace80a.e50df8","name":"scaled range","func":"var shares = 0;\nvar orders = [];\nvar spread =\n    msg.pricerange.high - \n    msg.pricerange.low;\nvar numorders =\n    msg.pricerange.orders;\nvar temp;\n\nfor(var i = 0; i < numorders; i++){\n    temp = msg;\n    shares += i;\n    temp.price =\n        msg.pricerange.low +\n        (i / numorders) * spread;\n    temp.quantity = 2;\n    orders.push(JSON.parse(JSON.stringify(temp)));\n}\nmsg.payload = orders;\nreturn msg;","outputs":1,"noerr":0,"x":470,"y":180,"wires":[["b8fb320c.7d50c"]]},{"id":"2e5004.47f77ffc","type":"change","z":"12ace80a.e50df8","name":"10 shares","rules":[{"t":"set","p":"quantity","pt":"msg","to":"10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":220,"y":220,"wires":[["b2412049.328f5"]]},{"id":"b2412049.328f5","type":"change","z":"12ace80a.e50df8","name":"buy order","rules":[{"t":"set","p":"side","pt":"msg","to":"buy","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":220,"y":260,"wires":[["1084fa94.f2fe65"]]},{"id":"1084fa94.f2fe65","type":"change","z":"12ace80a.e50df8","name":"SET price range","rules":[{"t":"set","p":"pricerange","pt":"msg","to":"{\"high\":29,\"low\":25,\"orders\":5}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":240,"y":300,"wires":[["50c0d3e4.b9efdc","cfd4aa2c.ddc618"]]},{"id":"50c0d3e4.b9efdc","type":"debug","z":"12ace80a.e50df8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":320,"wires":[]},{"id":"ee209b5c.db0398","type":"debug","z":"12ace80a.e50df8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":650,"y":220,"wires":[]},{"id":"b8fb320c.7d50c","type":"split","z":"12ace80a.e50df8","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":470,"y":220,"wires":[["ed4c9777.40de28","ee209b5c.db0398"]]},{"id":"ed4c9777.40de28","type":"submit-order","z":"12ace80a.e50df8","name":"","x":470,"y":260,"wires":[["17dce38d.540a1c"]]}]
